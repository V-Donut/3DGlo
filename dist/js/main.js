(()=>{"use strict";const e=({timing:e,draw:t,duration:n})=>{let a=performance.now();requestAnimationFrame((function o(r){let l=(r-a)/n;l>1&&(l=1);let c=e(l);t(c),l<1&&requestAnimationFrame(o)}))},t=/[^а-яА-Я\s]+/g,n=/[^+\d-\(\)]+/g,a=/[^a-zA-Z0-9-_@\.!~\*']+/g,o=/[^а-яА-Я0-9-\.,!\?:;\(\)«»"\s]+/g,r=({formId:e,someElem:r=[]})=>{const l=document.getElementById(e),c=document.createElement("div");c.style.color="#19b5fe";try{if(!l)throw new Error("Верните форму на место!");l.addEventListener("submit",(e=>{e.preventDefault(),(()=>{const e=l.querySelectorAll("input"),s=new FormData(l),i={};var u;c.textContent="Загрузка...",l.append(c),s.forEach(((e,t)=>{i[t]=e})),r.forEach((e=>{const t=document.getElementById(e.id);"block"===e.type?i[e.id]=t.textContent:"input"===e.type&&(i[e.id]=t.value)})),(e=>{let r=!0;return e.forEach((e=>{const l=e.getAttribute("name").replace("user_",""),c=e.value;("name"===l&&null!==c.match(t)||"phone"===l&&null!==c.match(n)||"email"===l&&null!==c.match(a)||"message"===l&&null!==c.match(o))&&(r=!1)})),r})(e)?(u=i,fetch("https://jsonplaceholder.typicode.com/posts",{method:"POST",body:JSON.stringify(u),headers:{"Content-Type":"application/json"}}).then((e=>e.json()))).then((t=>{c.textContent="Спасибо! Наш менеджер с Вами свяжется!",e.forEach((e=>{e.value=""}))})).catch((e=>{c.textContent="Ошибка..."})):(c.textContent="",alert("Данные не валидны!"))})()}))}catch(e){console.log(e.message)}};(e=>{const t=document.getElementById("timer-hours"),n=document.getElementById("timer-minutes"),a=document.getElementById("timer-seconds"),o=e=>1===e.toString().length?"0"+e:e,r=e=>{let l=(()=>{let e=(new Date("16 april 2022").getTime()-(new Date).getTime())/1e3,t=Math.floor(e/60/60),n=Math.floor(e/60%60),a=Math.floor(e%60);return e<=0&&(t=0,n=0,a=0),{timeRemaining:e,hours:t,minutes:n,seconds:a}})();t.textContent=o(l.hours),n.textContent=o(l.minutes),a.textContent=o(l.seconds),e&&l.timeRemaining>0&&setInterval(r,1e3,!1)};r(!0)})(),(()=>{const e=document.querySelector("menu");document.addEventListener("click",(t=>{(t.target.classList.contains("close-btn")||t.target.matches(".active-menu ul>li>a")||t.target.closest(".menu")||e.classList.contains("active-menu")&&!t.target.closest(".active-menu"))&&e.classList.toggle("active-menu")}))})(),(()=>{const t=document.querySelector(".popup"),n=document.querySelectorAll(".popup-btn"),a=t.querySelector(".popup-content");t.querySelector("#form3-name"),t.querySelector("#form3-phone"),t.querySelector("#form3-email");let o=document.documentElement.clientWidth;n.forEach((n=>{n.addEventListener("click",(()=>{o>=768&&(a.style.top="-30%"),t.style.display="block",o>=768&&e({duration:500,timing:e=>e,draw(e){a.style.top=10*e+"%"}})}))})),t.addEventListener("click",(e=>{e.target.closest(".popup-content")&&!e.target.classList.contains("popup-close")||(t.style.display="none")}))})(),((t=100)=>{const n=document.querySelector(".calc-block"),a=document.querySelector(".calc-type"),o=n.querySelector(".calc-square"),r=n.querySelector(".calc-count"),l=n.querySelector(".calc-day"),c=document.getElementById("total");n.addEventListener("input",(n=>{n.target!==a&&n.target!==o&&n.target!==r&&n.target!==l||(()=>{const n=+a.options[a.selectedIndex].value,s=o.value;let i=0,u=1,d=1;r.value>1&&(u+=+r.value/10),l.value&&l.value<5?d=2:l.value&&l.value<10&&(d=1.5),i=a.value&&o.value?t*n*s*u*d:0,e({duration:500,timing:e=>e,draw(e){c.textContent=Math.trunc(e*i)}})})()})),o.addEventListener("input",(e=>{e.target.value=e.target.value.replace(/\D+/,"")})),r.addEventListener("input",(e=>{e.target.value=e.target.value.replace(/\D+/,"")})),l.addEventListener("input",(e=>{e.target.value=e.target.value.replace(/\D+/,"")}))})(100),(()=>{const e=document.getElementsByName("user_name"),r=document.getElementsByName("user_email"),l=document.getElementsByName("user_phone"),c=document.getElementsByName("user_message");e.forEach((e=>{e.addEventListener("input",(e=>{e.target.value=e.target.value.replace(t,"")}))})),r.forEach((e=>{e.addEventListener("input",(e=>{e.target.value=e.target.value.replace(a,"")}))})),l.forEach((e=>{e.addEventListener("input",(e=>{e.target.value=e.target.value.replace(n,"")}))})),c.forEach((e=>{e.addEventListener("input",(e=>{e.target.value=e.target.value.replace(o,"")}))}))})(),(()=>{const e=document.querySelector(".service-header"),t=document.querySelectorAll(".service-header-tab"),n=document.querySelectorAll(".service-tab");e.addEventListener("click",(e=>{if(e.target.closest(".service-header-tab")){const a=e.target.closest(".service-header-tab");t.forEach(((e,t)=>{e===a?(e.classList.add("active"),n[t].classList.remove("d-none")):(e.classList.remove("active"),n[t].classList.add("d-none"))}))}}))})(),(e=>{const{slider:t,slide:n,dotsList:a,dot:o,arrows:r,prev:l,next:c,slideActive:s=".slide-active",dotActive:i=".dot-active"}=e,u=document.querySelector(t),d=document.querySelectorAll(n),m=document.querySelector(a);if(!u||!d.length)return;let v,p,g=0;(e=>{const t=o.replace(".","");for(let n=0;n<e;n++){let e=document.createElement("li");e.className=0===n?t+" "+i:t,m.append(e)}v=document.querySelectorAll(o)})(d.length);const h=(e,t,n)=>{e[t].classList.remove(n.replace(".",""))},y=(e,t,n)=>{e[t].classList.add(n.replace(".",""))},E=()=>{h(d,g,s),h(v,g,i),g++,g>=d.length&&(g=0),y(d,g,s),y(v,g,i)},f=(e=1500)=>{p=setInterval(E,e)};u.addEventListener("click",(e=>{e.preventDefault(),e.target.matches(o+", "+r)&&(h(d,g,s),h(v,g,i),e.target.matches(c)?g++:e.target.matches(l)?g--:e.target.classList.contains(o.replace(".",""))&&v.forEach(((t,n)=>{e.target===t&&(g=n)})),g>=d.length&&(g=0),g<0&&(g=d.length-1),y(d,g,s),y(v,g,i))})),u.addEventListener("mouseenter",(e=>{e.target.matches(o+", "+r)&&clearInterval(p)}),!0),u.addEventListener("mouseleave",(e=>{e.target.matches(o+", "+r)&&f(2e3)}),!0),f(2e3)})({slider:".portfolio-content",slide:".portfolio-item",dotsList:".portfolio-dots",dot:".dot",arrows:".portfolio-btn",prev:".prev",next:".next",slideActive:".portfolio-item-active",dotActive:".dot-active"}),r({formId:"form1",someElem:[{type:"block",id:"total"}]}),r({formId:"form2",someElem:[{type:"block",id:"total"}]}),r({formId:"form3",someElem:[{type:"block",id:"total"}]})})();