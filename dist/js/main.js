(()=>{"use strict";const e=({timing:e,draw:t,duration:n})=>{let o=performance.now();requestAnimationFrame((function l(a){let r=(a-o)/n;r>1&&(r=1);let c=e(r);t(c),r<1&&requestAnimationFrame(l)}))},t=()=>{const e=document.body;e.style.overflow="auto",e.style.marginRight=0},n=/[^а-яА-Я\s]+/g,o=/[^+\d-\(\)]+/g,l=/[^a-zA-Z0-9-_@\.!~\*']+/g,a=/[^а-яА-Я0-9-\.,!\?:;\(\)«»"\s]+/g,r=({formId:e,someElem:r=[]})=>{const c=document.getElementById(e),s=document.querySelector(".popup"),i=document.createElement("div");i.style.color="#19b5fe";try{if(!c)throw new Error("Верните форму на место!");c.addEventListener("submit",(e=>{e.preventDefault(),(()=>{const e=c.querySelectorAll("input"),d=new FormData(c),u={};var m;i.textContent="Загрузка...",c.append(i),d.forEach(((e,t)=>{u[t]=e})),r.forEach((e=>{const t=document.getElementById(e.id);"block"===e.type?u[e.id]=t.textContent:"input"===e.type&&(u[e.id]=t.value)})),(e=>{let t=!0;return e.forEach((e=>{const r=e.getAttribute("name").replace("user_",""),c=e.value;("name"===r&&(null!==c.match(n)||c.length<2)||"phone"===r&&(null!==c.match(o)||c.length<6)||"email"===r&&null!==c.match(l)||"message"===r&&null!==c.match(a))&&(t=!1)})),t})(e)?(m=u,fetch("https://jsonplaceholder.typicode.com/posts",{method:"POST",body:JSON.stringify(m),headers:{"Content-Type":"application/json"}}).then((e=>e.json()))).then((n=>{i.textContent="Спасибо! Наш менеджер с Вами свяжется!",e.forEach((e=>{e.value=""})),setTimeout((()=>{i.textContent="",s.style.display="none",t()}),4e3)})).catch((e=>{i.textContent="Ошибка..."})):(i.textContent="",alert("Данные не валидны!"))})()}))}catch(e){console.log(e.message)}};(e=>{const t=document.getElementById("timer-hours"),n=document.getElementById("timer-minutes"),o=document.getElementById("timer-seconds"),l=e=>1===e.toString().length?"0"+e:e,a=e=>{let r=(()=>{let e=(new Date("16 april 2022").getTime()-(new Date).getTime())/1e3,t=Math.floor(e/60/60),n=Math.floor(e/60%60),o=Math.floor(e%60);return e<=0&&(t=0,n=0,o=0),{timeRemaining:e,hours:t,minutes:n,seconds:o}})();t.textContent=l(r.hours),n.textContent=l(r.minutes),o.textContent=l(r.seconds),e&&r.timeRemaining>0&&setInterval(a,1e3,!1)};a(!0)})(),(()=>{const e=document.querySelector("menu"),t=()=>{e.classList.toggle("active-menu")};document.addEventListener("click",(n=>{if(n.target.matches(".active-menu ul>li>a")){n.preventDefault();const e=n.target.getAttribute("href");document.querySelector(e).scrollIntoView({behavior:"smooth",block:"start"}),t()}else n.target.classList.contains("close-btn")||n.target.closest(".menu")||e.classList.contains("active-menu")&&!n.target.closest(".active-menu")?t():"#service-block"===n.target.parentElement.getAttribute("href")&&(n.preventDefault(),document.querySelector("#service-block").scrollIntoView({behavior:"smooth",block:"start"}))}))})(),(()=>{const n=document.querySelector(".popup"),o=document.querySelectorAll(".popup-btn"),l=n.querySelector(".popup-content");let a=document.documentElement.clientWidth;o.forEach((t=>{t.addEventListener("click",(()=>{a>=768&&(l.style.top="-30%"),n.style.display="block",(()=>{const e=document.body;e.style.overflow="hidden";const t=(()=>{let e=document.createElement("div");e.style.width="500px",e.style.height="500px",e.style.overflowY="scroll",e.style.visibility="hidden",document.body.appendChild(e);let t=e.offsetWidth-e.clientWidth;return e.remove(),t})();e.style.marginRight=`${t}px`})(),a>=768&&e({duration:500,timing:e=>e,draw(e){l.style.top=10*e+"%"}})}))})),n.addEventListener("click",(e=>{e.target.closest(".popup-content")&&!e.target.classList.contains("popup-close")||(n.style.display="none",t())}))})(),((t=100)=>{const n=document.querySelector(".calc-block"),o=document.querySelector(".calc-type"),l=n.querySelector(".calc-square"),a=n.querySelector(".calc-count"),r=n.querySelector(".calc-day"),c=document.getElementById("total");let s=0;n.addEventListener("input",(n=>{n.target!==o&&n.target!==l&&n.target!==a&&n.target!==r||(()=>{const n=+o.options[o.selectedIndex].value,i=l.value;let d=0,u=1,m=1;a.value>1&&(u+=+a.value/10),r.value&&r.value<5?m=2:r.value&&r.value<10&&(m=1.5),d=o.value&&l.value?t*n*i*u*m:0;let v=s;s=d,e({duration:500,timing:e=>e,draw:d>v?e=>{e*d>v&&(c.textContent=Math.trunc(e*d))}:e=>{let t=Math.trunc((1-e)*(v-d));c.textContent=t>d?t:d}})})()})),l.addEventListener("input",(e=>{e.target.value=e.target.value.replace(/\D+/,"")})),a.addEventListener("input",(e=>{e.target.value=e.target.value.replace(/\D+/,"")})),r.addEventListener("input",(e=>{e.target.value=e.target.value.replace(/\D+/,"")}))})(100),(()=>{const e=document.getElementsByName("user_name"),t=document.getElementsByName("user_email"),r=document.getElementsByName("user_phone"),c=document.getElementsByName("user_message");e.forEach((e=>{e.addEventListener("input",(e=>{e.target.value=e.target.value.replace(n,"")}))})),t.forEach((e=>{e.addEventListener("input",(e=>{e.target.value=e.target.value.replace(l,"")}))})),r.forEach((e=>{e.addEventListener("input",(e=>{e.target.value=e.target.value.replace(o,"")}))})),c.forEach((e=>{e.addEventListener("input",(e=>{e.target.value=e.target.value.replace(a,"")}))}))})(),(()=>{const e=document.querySelector(".service-header"),t=document.querySelectorAll(".service-header-tab"),n=document.querySelectorAll(".service-tab");e.addEventListener("click",(e=>{if(e.target.closest(".service-header-tab")){const o=e.target.closest(".service-header-tab");t.forEach(((e,t)=>{e===o?(e.classList.add("active"),n[t].classList.remove("d-none")):(e.classList.remove("active"),n[t].classList.add("d-none"))}))}}))})(),(e=>{const{slider:t,slide:n,dotsList:o,dot:l,arrows:a,prev:r,next:c,slideActive:s=".slide-active",dotActive:i=".dot-active"}=e,d=document.querySelector(t),u=document.querySelectorAll(n),m=document.querySelector(o);if(!d||!u.length)return;let v,p,g=0;(e=>{const t=l.replace(".","");for(let n=0;n<e;n++){let e=document.createElement("li");e.className=0===n?t+" "+i:t,m.append(e)}v=document.querySelectorAll(l)})(u.length);const h=(e,t,n)=>{e[t].classList.remove(n.replace(".",""))},y=(e,t,n)=>{e[t].classList.add(n.replace(".",""))},f=()=>{h(u,g,s),h(v,g,i),g++,g>=u.length&&(g=0),y(u,g,s),y(v,g,i)},E=(e=1500)=>{p=setInterval(f,e)};d.addEventListener("click",(e=>{e.preventDefault(),e.target.matches(l+", "+a)&&(h(u,g,s),h(v,g,i),e.target.matches(c)?g++:e.target.matches(r)?g--:e.target.classList.contains(l.replace(".",""))&&v.forEach(((t,n)=>{e.target===t&&(g=n)})),g>=u.length&&(g=0),g<0&&(g=u.length-1),y(u,g,s),y(v,g,i))})),d.addEventListener("mouseenter",(e=>{e.target.matches(l+", "+a)&&clearInterval(p)}),!0),d.addEventListener("mouseleave",(e=>{e.target.matches(l+", "+a)&&E(2e3)}),!0),E(2e3)})({slider:".portfolio-content",slide:".portfolio-item",dotsList:".portfolio-dots",dot:".dot",arrows:".portfolio-btn",prev:".prev",next:".next",slideActive:".portfolio-item-active",dotActive:".dot-active"}),r({formId:"form1",someElem:[{type:"block",id:"total"}]}),r({formId:"form2",someElem:[{type:"block",id:"total"}]}),r({formId:"form3",someElem:[{type:"block",id:"total"}]})})();